prontera,122,62,3	script	Redeemer#Give1	4_M_YOUNGKNIGHT,{	if (checkweight(Knife,1) == 0 || MaxWeight - Weight < 2000) {		mes "[Redeemer]";		mes "^0000ffHold it right there!";		mes "You're carrying too many items and don't have enough inventory space to receive any rewards. Please make more inventory space available and come back to take this challenge.^000000";		close;	}	mes "[Redeemer]";	mes "Welcome, "+strcharinfo(0)+"!";	mes "I've been expecting you.";	next;	mes "[Redeemer]";	mes "I am a distributor of all the";	mes "items that adventurers like";	mes "yourself purchase on websites";	mes "or receive as promotions.";	next;	mes "[Redeemer]";	mes "^0000FFIf the list is empty,";	mes "that means that you have";	mes "not purchased, or inputted";	mes "your serial code from our website.^000000";	next;	query_sql "SELECT `id`, `nameid`, `quantity` FROM `" + .redeemTable$ + "` WHERE `account_id` = " + getcharid(3) + " AND `redeemed` = 0",.@id,.@nameid,.@quantity;	.@size = getarraysize(.@id);		if (.@size > 128) .@size = .numRedemptionsSimul;	for(.@i = @k = 0; .@i < .@size; .@i++) {			.@menu$ += getitemname(.@nameid[.@i])+":";			.@index[.@k++] = .@i;	}	.@opt = select(.@menu$)-1;	.@itemid = .@nameid[.@index[.@opt]];	.@i = .@index[.@opt];	query_sql "UPDATE `" + escape_sql(.redeemTable$) + "` SET `char_id` = " + getcharid(0) + ", `redeemed` = 1, `redemption_date` = NOW() WHERE `id` = " + .@id[.@i];	getitem .@nameid[.@i],.@quantity[.@i];	close;	OnInit:	.redeemTable$ = "cp_redeemlog";	.numRedemptionsSimul = 128; 	end;}